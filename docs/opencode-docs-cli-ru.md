# CLI (Интерфейс командной строки)

Опции и команды OpenCode CLI.

## tui

Запускает терминальный пользовательский интерфейс OpenCode.

```bash
opencode [project]
```

#### Флаги

*   `--continue`, `-c`: Продолжить последнюю сессию.
*   `--session`, `-s`: Загрузить конкретную сессию по ID.
*   `--prompt`: Начать с начального промпта.
*   `--model`, `-m`: Выбрать модель для использования.
*   `--agent`: Выбрать агента (например, `coder`, `architect`).
*   `--port`: Порт для подключения (если используется с удаленным сервером).
*   `--hostname`: Хост для подключения.

## Команды (Commands)

OpenCode CLI также имеет следующие команды.

### agent
Управление агентами для OpenCode.

```bash
opencode agent [command]
```

#### create
Создать нового агента с пользовательской конфигурацией.
Эта команда проведет вас через процесс создания нового агента с пользовательским системным промптом и конфигурацией инструментов.

#### list
Список всех доступных агентов.

### attach
Присоединить терминал к уже запущенному серверу OpenCode backend, запущенному через команды `serve` или `web`.

```bash
opencode attach [url]
```

Это позволяет использовать TUI с удаленным бэкендом OpenCode. Например:

```bash
# Запустить сервер бэкенда для доступа через веб/мобайл
opencode web --port 4096 --hostname 0.0.0.0

# В другом терминале присоединить TUI к запущенному бэкенду
opencode attach http://10.20.30.40:4096
```

### auth
Команда для управления учетными данными и входа в провайдеры.

```bash
opencode auth [command]
```

#### login
OpenCode использует список провайдеров на [Models.dev](https://models.dev). Вы можете использовать `opencode auth login` для настройки API ключей для любого провайдера. Они сохраняются в `~/.local/share/opencode/auth.json`.

```bash
opencode auth login
```

При запуске OpenCode загружает провайдеры из файла учетных данных, а также из переменных окружения или файла `.env`.

#### list
Перечисляет все аутентифицированные провайдеры, сохраненные в файле учетных данных.

```bash
opencode auth list
# или короткая версия
opencode auth ls
```

#### logout
Выходит из провайдера, удаляя его из файла учетных данных.

```bash
opencode auth logout
```

### github
Управление агентом GitHub для автоматизации репозитория.

```bash
opencode github [command]
```

#### install
Установить агент GitHub в ваш репозиторий.
Это настраивает необходимый рабочий процесс GitHub Actions и проводит вас через процесс конфигурации.

#### run
Запустить агент GitHub. Обычно используется в GitHub Actions.

### mcp
Управление серверами Model Context Protocol.

```bash
opencode mcp [command]
```

#### add
Добавить MCP сервер в вашу конфигурацию.

#### list
Список всех настроенных MCP серверов и их статус подключения.

#### auth
Аутентификация с MCP сервером, поддерживающим OAuth.

#### logout
Удалить OAuth учетные данные для MCP сервера.

#### debug
Отладка проблем с подключением OAuth для MCP сервера.

### models
Список всех доступных моделей от настроенных провайдеров.

```bash
opencode models [provider]
```

Эта команда отображает все модели, доступные через ваших настроенных провайдеров, в формате `provider/model`.
Это полезно для определения точного имени модели для использования в [вашей конфигурации](opencode-docs-config-ru.md).

Вы можете опционально передать ID провайдера для фильтрации моделей по этому провайдеру.
Используйте флаг `--refresh`, чтобы обновить кэшированный список моделей.

### run
Запустить opencode в неинтерактивном режиме, передав промпт напрямую.

```bash
opencode run [message..]
```

Это полезно для скриптов, автоматизации или когда вам нужен быстрый ответ без запуска полного TUI.

```bash
opencode run Explain the use of context in Go
```

Вы также можете присоединиться к запущенному экземпляру `opencode serve`, чтобы избежать времени "холодного старта" MCP серверов при каждом запуске.

### serve
Запустить headless сервер OpenCode для доступа через API.

```bash
opencode serve
```

### session
Управление сессиями OpenCode.

#### list
Список всех сессий OpenCode.

### stats
Показать статистику использования токенов и затрат для ваших сессий OpenCode.

### export
Экспортировать данные сессии как JSON.

```bash
opencode export [sessionID]
```

### import
Импортировать данные сессии из JSON файла или URL шаринга OpenCode.

```bash
opencode import <file>
```

### web
Запустить headless сервер OpenCode с веб-интерфейсом.

```bash
opencode web
```

### acp
Запустить сервер ACP (Agent Client Protocol).

```bash
opencode acp
```

### uninstall
Удалить OpenCode и все связанные файлы.

```bash
opencode uninstall
```

### upgrade
Обновляет opencode до последней версии или указанной версии.

```bash
opencode upgrade [target]
```

## Глобальные флаги (Global Flags)

OpenCode CLI принимает следующие глобальные флаги:

*   `--help`, `-h`: Показать справку.
*   `--version`, `-v`: Показать версию.
*   `--print-logs`: Выводить логи в консоль.
*   `--log-level`: Установить уровень логирования.

## Переменные окружения (Environment variables)

OpenCode можно настроить с помощью переменных окружения.

*   `OPENCODE_CONFIG`: Путь к файлу конфигурации.
*   `OPENCODE_CONFIG_DIR`: Директория конфигурации.
*   `OPENCODE_DISABLE_AUTOUPDATE`: Отключить автообновление.
*   `OPENCODE_EXPERIMENTAL_LSP_TOOL`: Включить экспериментальный инструмент LSP.
*   И другие...

### Экспериментальные

*   `OPENCODE_EXPERIMENTAL`: Включить все экспериментальные функции.
