# Разрешения (Permissions)

Контролируйте, какие действия требуют одобрения для запуска.

## Действия (Actions)

Каждое правило разрешения разрешается в одно из следующих:
*   `"allow"` — запустить без одобрения
*   `"ask"` — запросить одобрение
*   `"deny"` — заблокировать действие

## Конфигурация (Configuration)

В `opencode.json`:

```json
{
  "permission": {
    "*": "ask",
    "bash": "allow",
    "edit": "deny"
  }
}
```

Разрешить всё: `"permission": "allow"`.

## Гранулярные правила (Granular Rules)

Для большинства разрешений можно использовать объект для применения разных действий на основе ввода инструмента.

```json
{
  "permission": {
    "bash": {
      "*": "ask",
      "git *": "allow",
      "rm *": "deny"
    }
  }
}
```

Правила оцениваются по совпадению шаблона, побеждает последнее совпадение.
Поддерживаются подстановочные знаки `*` (ноль или более символов) и `?` (один символ).

## Доступные разрешения (Available Permissions)

*   `read`: чтение файла.
*   `edit`: изменение файла (edit, write, patch).
*   `glob`: поиск файлов.
*   `grep`: поиск по содержимому.
*   `list`: список файлов.
*   `bash`: выполнение команд.
*   `task`: запуск субагентов.
*   `webfetch`: загрузка URL.
*   и другие.

## Значения по умолчанию (Defaults)

Если ничего не указано:
*   Большинство разрешений: `"allow"`.
*   `.env` файлы: `"deny"` для `read` (но `.env.example` — `"allow"`).
*   `doom_loop` (повторяющиеся вызовы) и `external_directory`: `"ask"`.

## Что делает "Ask" (What "Ask" Does)

При запросе одобрения UI предлагает:
*   `once`: одобрить только этот запрос.
*   `always`: одобрять будущие запросы, соответствующие шаблону (для текущей сессии).
*   `reject`: отклонить запрос.

## Агенты (Agents)

Вы можете переопределять разрешения для каждого агента. Правила агента имеют приоритет над глобальными.

```json
{
  "agent": {
    "build": {
      "permission": {
        "bash": { "git push": "allow" }
      }
    }
  }
}
```
