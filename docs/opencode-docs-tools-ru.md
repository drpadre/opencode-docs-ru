# Инструменты (Tools)

Управление инструментами, которые может использовать LLM.

## Настройка (Configure)

Вы можете настроить инструменты глобально или для конкретного агента. Специфичные для агента настройки переопределяют глобальные.
По умолчанию все инструменты установлены в `true`. Чтобы отключить инструмент, установите его в `false`.

### Глобально (Global)

Отключайте или включайте инструменты глобально, используя опцию `tools`.

```json
{
  "$schema": "https://opencode.ai/config.json",
  "tools": {
    "write": false,
    "bash": false,
    "webfetch": true
  }
}
```

Вы также можете использовать подстановочные знаки (wildcards) для управления несколькими инструментами одновременно. Например, чтобы отключить все инструменты с MCP сервера:

```json
{
  "$schema": "https://opencode.ai/config.json",
  "tools": {
    "mymcp_*": false
  }
}
```

### Для агента (Per agent)

Переопределяйте глобальные настройки инструментов для конкретных агентов, используя конфигурацию `tools` в определении агента.

```json
{
  "$schema": "https://opencode.ai/config.json",
  "tools": {
    "write": true,
    "bash": true
  },
  "agent": {
    "plan": {
      "tools": {
        "write": false,
        "bash": false
      }
    }
  }
}
```

Например, здесь агент `plan` переопределяет глобальную конфигурацию, чтобы отключить инструменты `write` и `bash`.

Вы также можете настроить инструменты для агентов в Markdown.

```markdown
---
description: Read-only analysis agent
mode: subagent
tools:
  write: false
  edit: false
  bash: false
---

Analyze code without making any modifications.
```

[Узнайте больше](opencode-docs-agents-ru.md#tools) о настройке инструментов для агента.

## Встроенные (Built-in)

Вот все встроенные инструменты, доступные в OpenCode:

### bash
Выполняет команды оболочки в окружении вашего проекта.
Этот инструмент позволяет LLM запускать терминальные команды, такие как `npm install`, `git status` или любые другие команды оболочки.

```json
{ "tools": { "bash": true }}
```

### edit
Модифицирует существующие файлы, используя точную замену строк.
Этот инструмент выполняет точные правки файлов путем замены точных совпадений текста. Это основной способ, которым LLM модифицирует код.

```json
{ "tools": { "edit": true }}
```

### write
Создает новые файлы или перезаписывает существующие.
Используйте это, чтобы разрешить LLM создавать новые файлы. Он перезапишет существующие файлы, если они уже существуют.

```json
{ "tools": { "write": true }}
```

### read
Читает содержимое файлов из вашей кодовой базы.
Этот инструмент читает файлы и возвращает их содержимое. Он поддерживает чтение определенных диапазонов строк для больших файлов.

```json
{ "tools": { "read": true }}
```

### grep
Ищет содержимое файлов, используя регулярные выражения.
Быстрый поиск контента по всей кодовой базе. Поддерживает полный синтаксис регулярных выражений и фильтрацию по шаблонам файлов.

```json
{ "tools": { "grep": true }}
```

### glob
Находит файлы по шаблону.
Ищет файлы, используя glob шаблоны, такие как `**/*.js` или `src/**/*.ts`. Возвращает совпадающие пути к файлам, отсортированные по времени модификации.

```json
{ "tools": { "glob": true }}
```

### list
Перечисляет файлы и директории по указанному пути.
Этот инструмент перечисляет содержимое директории. Он принимает glob шаблоны для фильтрации результатов.

```json
{ "tools": { "list": true }}
```

### lsp (экспериментально)
Взаимодействует с вашими настроенными LSP серверами для получения функций code intelligence, таких как определения (definitions), ссылки (references), информация при наведении (hover info) и иерархия вызовов (call hierarchy).

> **Примечание**: Этот инструмент доступен только когда `OPENCODE_EXPERIMENTAL_LSP_TOOL=true` (или `OPENCODE_EXPERIMENTAL=true`).

Поддерживаемые операции включают `goToDefinition`, `findReferences`, `hover`, `documentSymbol`, `workspaceSymbol`, `goToImplementation`, `prepareCallHierarchy`, `incomingCalls`, и `outgoingCalls`.

Чтобы настроить, какие LSP серверы доступны для вашего проекта, см. [LSP Servers](opencode-docs-lsp-ru.md).

### patch
Применяет патчи к файлам.
Этот инструмент применяет файлы патчей к вашей кодовой базе. Полезно для применения диффов и патчей из различных источников.

```json
{ "tools": { "patch": true }}
```

### skill
Загружает [навык (skill)](opencode-docs-skills-ru.md) (файл `SKILL.md`) и возвращает его содержимое в разговор.
Вы можете управлять запросами на одобрение загрузки навыков через [разрешения](opencode-docs-permissions-ru.md), используя `permission.skill`.

```json
{ "tools": { "skill": true }}
```

### todowrite
Управляет списками задач (todo) во время сессий кодирования.
Создает и обновляет списки задач для отслеживания прогресса во время сложных операций. LLM использует это для организации многошаговых задач.

> **Примечание**: Этот инструмент отключен для субагентов по умолчанию, но вы можете включить его вручную.

```json
{ "tools": { "todowrite": true }}
```

### todoread
Читает существующие списки задач.
Читает текущее состояние списка задач. Используется LLM для отслеживания того, какие задачи ожидают выполнения или завершены.

> **Примечание**: Этот инструмент отключен для субагентов по умолчанию, но вы можете включить его вручную.

```json
{ "tools": { "todoread": true }}
```

### webfetch
Получает веб-контент.
Позволяет LLM получать и читать веб-страницы. Полезно для поиска документации или исследования онлайн-ресурсов.

```json
{ "tools": { "webfetch": true }}
```

## Пользовательские инструменты (Custom tools)

Пользовательские инструменты позволяют вам определять свои собственные функции, которые может вызывать LLM. Они определяются в вашем файле конфигурации и могут выполнять произвольный код.
[Узнайте больше](opencode-docs-custom-tools-ru.md) о создании пользовательских инструментов.

## Серверы MCP (MCP servers)

Серверы MCP (Model Context Protocol) позволяют интегрировать внешние инструменты и сервисы. Это включает доступ к базам данных, интеграции с API и сторонние сервисы.
[Узнайте больше](opencode-docs-mcp-servers-ru.md) о настройке серверов MCP.

## Внутреннее устройство (Internals)
Внутренне инструменты, такие как `grep`, `glob` и `list`, используют [ripgrep](https://github.com/BurntSushi/ripgrep). По умолчанию `ripgrep` учитывает шаблоны `.gitignore`, что означает, что файлы и директории, перечисленные в вашем `.gitignore`, будут исключены из поиска и списков.

### Шаблоны игнорирования (Ignore patterns)
Чтобы включить файлы, которые обычно игнорируются, создайте файл `.ignore` в корне вашего проекта. Этот файл может явно разрешать определенные пути.

```
!node_modules/
!dist/
!build/
```

Например, этот файл `.ignore` позволяет `ripgrep` искать внутри директорий `node_modules/`, `dist/` и `build/`, даже если они перечислены в `.gitignore`.
